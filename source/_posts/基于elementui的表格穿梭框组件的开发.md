---
title: åŸºäºelementuiçš„è¡¨æ ¼ç©¿æ¢­æ¡†ç»„ä»¶çš„å¼€å‘
date: 2019-08-21 22:21:43
tags:
---
åœ¨å¼€å‘è¿‡ç¨‹ä¸­éœ€è¦ç”¨åˆ°ä¸€ä¸ªè¡¨æ ¼çš„ç©¿æ¢­æ¡†ï¼Œä½†å‘ç°elementuiä¸­çš„ç©¿æ¢­æ¡†ä¸æ”¯æŒè‡ªå®šä¹‰ï¼Œæœ¬ç€ä¸é‡å¤é€ è½®å­çš„åŸåˆ™å»npmä¸Šæ‰¾äº†ä¸€åœˆï¼Œå¹¶æ²¡æœ‰æ‰¾åˆ°ï¼Œé‚£åªèƒ½è‡ªå·±æ’¸ä¸€ä¸ªäº†ã€‚æœ€ç»ˆçš„æ•ˆæœæ˜¯è¿™æ ·çš„ï¼š
![table_transfer_result.gif](https://i.loli.net/2019/08/27/UZl28uzeiCgtsIP.gif)
å…¶å®è¿™ä¸ªç»„ä»¶å¾ˆç®€å•ï¼Œä¸¤ä¸ªå¯ä»¥å¤é€‰çš„è¡¨æ ¼ï¼Œä»¥åŠä¸¤ä¸ªæ§åˆ¶ç§»åŠ¨çš„æŒ‰é’®å°±å®Œæˆäº†ï¼Œä¸è¿‡åç»­ä¹Ÿåœ¨è¿™ä¸ªçš„åŸºç¡€ä¸Šæ·»åŠ äº†ä¸€äº›åŠŸèƒ½ï¼Œå¦‚ç¦ç”¨æŸä¸€è¡Œçš„å‹¾é€‰ï¼Œå¯¹è¡¨æ ¼ä¸­æ•°æ®æ˜¾ç¤ºçš„è‡ªå®šä¹‰ï¼Œç­‰ç­‰ã€‚

å› ä¸ºæƒ³è¦å°è¯•ä¸€ä¸‹å°†ç»„ä»¶å‘å¸ƒåˆ°npmä¸Šï¼Œæ‰€ä»¥å’Œå¹³æ—¶çš„Vueç»„ä»¶çš„æµç¨‹å¹¶ä¸å®Œå…¨ç›¸åŒï¼Œè€Œæ˜¯å¤šäº†ä¸€äº›é…ç½®ä¸Šçš„æ“ä½œã€‚

æ•´ä½“æµç¨‹åˆ†ä¸ºå››æ­¥ï¼š

1. æ­å»ºç»„ä»¶å¼€å‘ç¯å¢ƒ
2. å¼€å‘ç»„ä»¶
3. ç¼–å†™demo
4. å‘å¸ƒåˆ°npm

## æ­å»ºç»„ä»¶å¼€å‘ç¯å¢ƒ

åœ¨æ•´ä¸ªå¼€å‘è¿‡ç¨‹ä¸­ï¼Œç¯å¢ƒçš„æ­å»ºå¯¹äºæ²¡æœ‰å‘å¸ƒè¿‡ç»„ä»¶çš„æˆ‘æ¥è¯´æ‰æ˜¯æœ€å¤æ‚çš„ã€‚

å‰é¢ä¹Ÿæåˆ°äº†æƒ³è¦å‘å¸ƒåˆ°npmä¸Šçš„è¯å¹¶ä¸èƒ½ä»…ä»…å¼€å‘ä¸€ä¸ªå•é¡µé¢ç»„ä»¶ï¼Œè€Œæ˜¯è¦å¯¹è¿™ä¸ªç»„ä»¶è¿›è¡Œä¸€å®šçš„å°è£…ï¼Œå¹¶ä¸”ç»è¿‡webpackçš„æ‰“åŒ…ï¼Œæœ€å¥½è¿˜èƒ½å¤Ÿæ”¯æŒå¤šç§å¼•å…¥çš„æ–¹å¼ã€‚

è¿™æ˜¯æˆ‘çš„æ–‡ä»¶ç›®å½•ï¼š

![1566779888233](G:\hexo\blog\source\images\1566779888233.png)

ä»£ç éƒ¨åˆ†ä¸»è¦ç”±ä¸¤éƒ¨åˆ†ç»„æˆ,exampleså’Œpackagesã€‚é¡¾åæ€ä¹‰ï¼Œexamplesä¸­æ”¾çš„æ˜¯ç¤ºä¾‹æ–‡ä»¶ï¼Œpackagesä¸­æ”¾çš„åˆ™æ˜¯æˆ‘ä»¬è¿™æ¬¡å¼€å‘çš„ç»„ä»¶ã€‚ä¹‹æ‰€ä»¥è¦æŠŠelTableTransfer æ”¾åˆ°packagesé‡Œé¢ï¼Œæ˜¯å› ä¸ºåœ¨ç»„ä»¶çš„å¼€å‘ä¸­å¯èƒ½ä¼šæœ‰è¿™ä¸€å¥—ç»„ä»¶ä¸æ­¢ä¸€ä¸ªçš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥æŠŠæ•´å¥—ç»„ä»¶ä»packagesä¸­æ‰“åŒ…ã€å¯¼å‡ºã€‚

ä½¿ç”¨vue-cli3åˆ›å»ºçš„æ–‡ä»¶ç»“æ„æ˜¯è¿™æ ·çš„ï¼š

![1566780195124.png](https://i.loli.net/2019/08/27/J5Bthvrx8q4HlXA.png)

å’Œæƒ³è¦çš„ç»“æ„è¿˜ä¸ä¸€æ ·ã€‚åœ¨ä½¿ç”¨vue-cli3åˆ›å»ºé¡¹ç›®å®Œæˆåï¼ŒæŠŠ`src` æ”¹ä¸º`examples` ï¼Œç„¶åæ·»åŠ å¦ä¸€ä¸ªæ–‡ä»¶å¤¹`packages` ã€‚æ”¹äº†æ–‡ä»¶ç»“æ„ä¹‹åï¼Œæ•´ä¸ªé¡¹ç›®çš„å…¥å£å˜äº†ï¼Œè¦é€šè¿‡babelè½¬æ¢çš„æ–‡ä»¶è·¯å¾„ä¹Ÿå˜äº†ã€‚

å› æ­¤è¦ä¿®æ”¹webpackçš„æ‰“åŒ…æ–¹å¼ï¼Œvuecli3ä¸­æŠŠwebpackä¸­çš„é…ç½®ç§»åˆ°äº†`vue.config.js`ä¸­ã€‚

é¦–å…ˆæ·»åŠ é¡¹ç›®çš„å…¥å£ï¼š

``` js
module.exports = {
	pages: {
		index: {
			entry: 'examples/main.js',
			template: 'public/index.html',
			filename: 'index.html'
		}
	},
}
```

ç„¶åæŠŠæ–°æ·»åŠ çš„`packages` æ·»åŠ åˆ°babelä¸­ã€‚åœ¨vuecli3ä¸­ï¼Œè¿™äº›é…ç½®å¹¶ä¸èƒ½åƒé…ç½®é¡¹ç›®å…¥å£é‚£æ ·ï¼Œç›´æ¥é…ç½®ï¼Œè€Œæ˜¯é€šè¿‡[é“¾å¼æ“ä½œ](https://github.com/neutrinojs/webpack-chain)æ¥å®ç°:

``` js
module.exports = {
	pages: {
		index: {
			entry: 'examples/main.js',
			template: 'public/index.html',
			filename: 'index.html'
		}
	},
	chainWebpack: (config) => {
		config.module
			.rule('js')
			.include
				.add('/packages')
				.end()
			.use('babel')
				.loader('babel-loader')
				.tap(option => option)
	}
}
```

## ç»„ä»¶å¼€å‘

è¿™ä¸ªç©¿æ¢­æ¡†ç»„ä»¶åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼Œè¡¨æ ¼ æŒ‰é’® è¡¨æ ¼ã€‚å› ä¸ºæ˜¯åŸºäºelementuiçš„ï¼Œæ‰€ä»¥ä¹Ÿä¸ç”¨è´¹åŠ›å»è‡ªå·±å†™è¡¨æ ¼ï¼Œè°ƒæ ·å¼ï¼Œè¿˜å¯ä»¥ç”¨elementuiçš„å¸ƒå±€ã€‚æ‰€ä»¥å°†æ•´ä¸ªç»„ä»¶ä½œä¸ºä¸€ä¸ªrowï¼Œå…¶ä¸­æœ‰ä¸‰ä¸ªcolã€‚

#### å·¦åŠéƒ¨åˆ†è¡¨æ ¼

æŒ‰ç€é¡ºåºä¸€ä¸ªä¸€ä¸ªæ¥å†™ï¼Œé¦–å…ˆæ˜¯ç¬¬ä¸€ä¸ªcolï¼Œå·¦åŠéƒ¨åˆ†è¡¨æ ¼ã€‚ä¸ºäº†è®©å†…å®¹ä¸»é¢˜æ›´åŠ çªå‡ºï¼Œæˆ‘æŠŠtableæ”¾åˆ°äº†el-cardä¸­ï¼Œç”¨el-cardçš„å¤´éƒ¨æ¥è¡¨æ˜è¿™ä¸ªè¡¨æ ¼çš„ä¸»é¢˜ã€‚ç„¶åæ˜¯è¡¨æ ¼çš„éƒ¨åˆ†ï¼Œç©¿æ¢­æ¡†å…¶å®å¹¶ä¸éœ€è¦ç”¨åˆ°å¤ªå¤šå¤æ‚çš„åŠŸèƒ½ï¼Œåªéœ€è¦åŠ ä¸€ä¸ªå¤šé€‰åˆ—å°±okäº†ã€‚ä½†æ˜¯è€ƒè™‘åˆ°å¯èƒ½ä¼šæœ‰è‡ªå®šä¹‰è¡¨æ ¼æ˜¾ç¤ºçš„éœ€æ±‚ï¼Œæˆ‘æ¨¡ä»¿elementuiçš„è¡¨æ ¼ï¼Œä½¿ç”¨æ’æ§½çš„æ–¹å¼ä»çˆ¶ç»„ä»¶ä¸­æ¥æ”¶æ‘¸æ¿ï¼Œç„¶åæ”¾åˆ°elementuiçš„è¡¨æ ¼æ’æ§½ä¸­ï¼Œå¯¹ï¼Œæˆ‘åªæ˜¯ä¸ªæ¬è¿å·¥ğŸ˜œã€‚

#### ä¸­é—´éƒ¨åˆ†æŒ‰é’®

ä¸­é—´æŒ‰é’®ä¹Ÿå¾ˆç®€å•ï¼Œæ”¾ä¸€å·¦ä¸€å³ä¸¤ä¸ªç®­å¤´ï¼Œç„¶åç¨ç¨è°ƒæ•´ä¸‹æ ·å¼å°±å¯ä»¥äº†ã€‚æ ·å¼çš„ç‚¹å‡»äº‹ä»¶ä¹Ÿå¹¶ä¸å¤æ‚ã€‚

- å‘ğŸ‘‰ç®­å¤´çš„ç‚¹å‡»äº‹ä»¶ï¼Œéœ€è¦å…ˆæŠŠè¢«å‹¾é€‰çš„æ•°æ®åŠ åˆ°å³è¾¹è¡¨æ ¼çš„æ•°æ®ä¸­ï¼Œç„¶åæŠŠè¢«å‹¾é€‰çš„æ•°æ®ä»å·¦è¾¹è¡¨æ ¼çš„æ•°æ®ä¸­åˆ é™¤å°±å¯ä»¥äº†ã€‚
- å‘ğŸ‘ˆç®­å¤´çš„ç‚¹å‡»äº‹ä»¶ï¼Œå’Œå‘å³çš„ç±»ä¼¼ï¼Œä¸å†èµ˜è¿°ã€‚

ç”±äºä»çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ•°æ®æ˜¯æ•°ç»„ï¼Œå¼•ç”¨ç±»å‹ï¼Œæ‰€ä»¥ç›´æ¥ä¿®æ”¹çš„è¯å°±å¯ä»¥å½±å“åˆ°çˆ¶ç»„ä»¶ï¼Œå¹¶ä¸éœ€è¦æ‹…å¿ƒå‘çˆ¶ç»„ä»¶ä¼ å€¼çš„é—®é¢˜ã€‚

#### å³åŠè¾¹éƒ¨åˆ†è¡¨æ ¼

å’Œå·¦è¾¹è¡¨æ ¼ç±»ä¼¼ï¼Œä¸”ç”±äºæ˜¯ç©¿æ¢­æ¡†ï¼Œä¸¤ä¸ªè¡¨æ ¼çš„åˆ—ä¿¡æ¯è‚¯å®šæ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥ä¸¤ä¸ªè¡¨æ ¼å…¬ç”¨ä¸€ä¸ªåˆ—çš„é…ç½®ã€‚é™¤äº†æ•°æ®æºå’Œè¡¨æ ¼çš„ä¸»é¢˜å’Œå·¦è¾¹çš„å®Œå…¨ç›¸åŒã€‚

èŠ±è´¹ä¸å¤šçš„æ—¶é—´ç»„ä»¶å°±å¼€å‘å®Œäº†ã€‚æºç åœ¨[è¿™é‡Œ](https://live.bilibili.com/528)



åœ¨ç»„ä»¶å¼€å‘å¥½ä¹‹åï¼Œè¿˜éœ€è¦æŒ‰ç…§Vueçš„æ ‡å‡†ï¼Œç»™è¿™ä¸ªç»„ä»¶å°è£…ä¸Šinstallæ–¹æ³•ï¼š

```js
import elTableTransfer from './src/elTableTransfer.vue'

elTableTransfer.install = function(Vue) {
	Vue.component(elTableTransfer.name, elTableTransfer);
}

export default elTableTransfer;
```

ä¸çŸ¥é“å¤§å®¶æ˜¯å¦è¿˜è®°å¾—ï¼Œåœ¨æ­å»ºç¯å¢ƒçš„æ—¶å€™ï¼Œè€ƒè™‘åˆ°ç»„ä»¶å¯èƒ½ä¸æ­¢ä¸€ä¸ªï¼Œè¿˜åœ¨ç»„ä»¶å¤–é¢åŒ…äº†ä¸€å±‚ï¼Œé‚£ä¹ˆè¿™ä¸€å±‚å°±æ˜¯è¦å¯¹å†…éƒ¨çš„æ‰€æœ‰ç»„ä»¶åšä¸€ä¸‹å°è£…ï¼Œåšæˆä¸€ä¸ªç»Ÿä¸€çš„installæ–¹æ³•ï¼Œæ–¹ä¾¿ä½¿ç”¨è€…æ³¨å†Œç»„ä»¶ï¼š

```js
import elTableTransfer from './elTableTransfer'

const components = [ elTableTransfer ];

function install(Vue) {
	components.map(component => {
		Vue.component(component.name, component);
	})
}

if(typeof window !== undefined && window.Vue) {
	install(window.Vue);
}

export default {
	elTableTransfer,
	install
}
```

åˆ°è¿™é‡Œï¼Œç»„ä»¶çš„å¼€å‘å°±åŸºæœ¬å®Œæˆï¼Œä½†æ˜¯åœ¨ä¸Šä¼ ä¹‹å‰æ€»è¦è‡ªå·±å…ˆéªŒè¯ä¸€ä¸‹æ•ˆæœï¼Œæ‰€ä»¥å¼€å‘ä¸ªdemoè¯•ç”¨ä¸€ä¸‹æ–°å¼€å‘ç»„ä»¶ã€‚ï¼ˆæˆ‘åœ¨å¼€å‘ä¸­å…¶å®æ˜¯æ˜¯å…ˆå†™å¥½demoï¼Œç„¶åå¼€å‘ç»„ä»¶æ—¶å°±å¯ä»¥ä¸€è¾¹å¼€å‘ä¸€è¾¹çœ‹åˆ°æ•ˆæœäº†ï¼Œè¿™é‡Œçš„é¡ºåºæ˜¯ä¸ºäº†æ–¹ä¾¿æè¿°ï¼‰

## ç¼–å†™demo

åªéœ€è¦åœ¨demoä¸­ç”¨åˆ°ä¸Šé¢ç¼–å†™çš„ç»„ä»¶å°±å¯ä»¥äº†ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œdemoä¸­è®°å¾—å¼•å…¥elementuiï¼Œå› ä¸ºç»„ä»¶æ˜¯åŸºäºelementuiçš„ã€‚



## å‘å¸ƒ

vue-cli-service buildå¯ä»¥é€šè¿‡--targeté€‰é¡¹æŒ‡å®šä¸åŒçš„[æ„å»ºç›®æ ‡](https://cli.vuejs.org/zh/guide/build-targets.html)ã€‚

é»˜è®¤çš„æ¨¡å¼æ˜¯åº”ç”¨æ¨¡å¼ï¼Œåœ¨è¿™ä¸ªæ¨¡å¼ä¸­

- `index.html` ä¼šå¸¦æœ‰æ³¨å…¥çš„èµ„æºå’Œ resource hint
- ç¬¬ä¸‰æ–¹åº“ä¼šè¢«åˆ†åˆ°ä¸€ä¸ªç‹¬ç«‹åŒ…ä»¥ä¾¿æ›´å¥½çš„ç¼“å­˜
- å°äº 4kb çš„é™æ€èµ„æºä¼šè¢«å†…è”åœ¨ JavaScript ä¸­
- `public` ä¸­çš„é™æ€èµ„æºä¼šè¢«å¤åˆ¶åˆ°è¾“å‡ºç›®å½•ä¸­

æˆ‘ä»¬å‘å¸ƒéœ€è¦ä¿®æ”¹ä¸ºåº“æ¨¡å¼ï¼Œåœ¨åº“æ¨¡å¼ä¸­ï¼ŒVueæ˜¯å¤–ç½®çš„ï¼Œè¿™æ„å‘³ç€åŒ…å†…ä¸ä¼šæœ‰Vueã€‚å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤å°†ä¸€ä¸ªå•ç‹¬çš„å…¥å£æ„å»ºä¸ºä¸€ä¸ªåº“ï¼š

`vue-cli-service build --target lib --name myLib [entry]`

å› æ­¤åœ¨package.jsonä¸­æ·»åŠ å‘½ä»¤ï¼š

`"lib": "vue-cli-service build --target lib --name eltabletransfer --dest lib packages/index.js"`

æ‰“åŒ…ç»“æœï¼š

![1566868076154](G:\hexo\blog\source\images\1566868076154.png)

åœ¨å‘å¸ƒä¹‹å‰è¿˜è¦æ³¨æ„ä¸€ä¸‹package.jsonä¸­çš„ä¸€äº›ä¿¡æ¯ï¼Œæ¯”å¦‚nameã€versionç­‰ç­‰ï¼Œè¿˜æœ‰privateå¿…é¡»æ˜¯falseï¼Œå¦åˆ™æ˜¯æ— æ³•å‘å¸ƒçš„ã€‚é™¤æ­¤ä¹‹å¤–è¿˜è¦æ·»åŠ ä¸€ä¸ª`.npmignore`æ–‡ä»¶ï¼Œç”¨æ¥å¿½ç•¥ä¸€äº›ä¸æƒ³å‘å¸ƒä¸Šå»çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ã€‚

æ¥ä¸‹æ¥å°±ç™»é™†è‡ªå·±çš„npmè´¦å·

![1566913492883](G:\hexo\blog\source\images\1566913492883.png)

ç„¶åæ‰§è¡Œ`npm publish` å‘½ä»¤ï¼Œç­‰ä¸Šå‡ ç§’é’Ÿï¼Œå°±å¯ä»¥åœ¨npmä¸Šçœ‹åˆ°è‡ªå·±å‘å¸ƒçš„ç»„ä»¶äº†!

![1566913595334](G:\hexo\blog\source\images\1566913595334.png)



## é¡¹ç›®åœ°å€

[npmåœ°å€](https://www.npmjs.com/package/el-table-transfer)

[githubåœ°å€]()

## å‚è€ƒæ–‡ç« 

[è¯¦è§£ï¼šVue cli3 åº“æ¨¡å¼æ­å»ºç»„ä»¶åº“å¹¶å‘å¸ƒåˆ° npm](https://juejin.im/post/5bbab9de5188255c8c0cb0e3)

[Vue cli3 æ„å»ºç›®æ ‡]([https://cli.vuejs.org/zh/guide/build-targets.html#%E5%BA%94%E7%94%A8](https://cli.vuejs.org/zh/guide/build-targets.html#åº”ç”¨))

[Vue cli3 webpacké…ç½®](https://cli.vuejs.org/zh/guide/webpack.html)